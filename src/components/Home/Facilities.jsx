import { Fragment, useEffect, useState } from "react";
import Axios from "../../axios/axios";
import Facility from "./Facilities/Facility";

const Facilities = () => {
  const [data, setData] = useState(null);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState(null);
  
  useEffect(() => {
   Axios.get('/features') 
     .then(response => {
       setData(response.data);
       setLoading(false);
     })
     .catch(error => {
       setError(error);
       setLoading(false);
     });
 }, []);

 if (loading) return <p>Loading...</p>;
 if (error) return <p>Error: {error.message}</p>

  return (
    <>
      <div className="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-5 py-3">
        {data?.map((facility) => {
          let image = "";
          if (facility.icon === "classroom") {
            image = (
              <svg
                viewBox="0 0 51 54"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M11.7446 22.5547L0.749998 38.6916C0.42917 39.2092 0.760415 39.882 1.3677 39.9483L23.0611 42.2328L11.7446 22.5547ZM1.39686 32.9445L9.23946 20.2795L1.25624 15.5199C0.97812 15.3543 0.625 15.553 0.625 15.875V32.7281C0.625 33.1453 1.17603 33.3006 1.39686 32.9445ZM2.52601 44.1416L22.7757 53.2157C23.3278 53.4693 23.958 53.0677 23.958 52.4642V45.6664L2.75518 43.358C2.29164 43.3063 2.10623 43.9367 2.52601 44.1416ZM10.9863 17.4577L19.3122 2.66138C19.7643 1.93056 18.9383 1.08278 18.1893 1.50823L2.48018 11.7158C2.22289 11.8835 2.23123 12.2603 2.49372 12.4176L10.9863 17.4577ZM25.6246 18.5115H37.0005L27.0444 1.08175C26.7184 0.555895 26.1715 0.292969 25.6246 0.292969C25.0778 0.292969 24.5309 0.555895 24.2049 1.08175L14.2488 18.5115H25.6246ZM49.993 15.5199L42.0098 20.2805L49.8524 32.9455C50.0722 33.3016 50.6243 33.1463 50.6243 32.7281V15.875C50.6243 15.553 50.2712 15.3543 49.993 15.5199ZM40.263 17.4577L48.7556 12.4166C49.0191 12.2592 49.0264 11.8824 48.7691 11.7147L33.0599 1.50823C32.311 1.08278 31.485 1.93056 31.937 2.66138L40.263 17.4577ZM48.4941 43.358L27.2913 45.6653V52.4631C27.2913 53.0676 27.9215 53.4683 28.4736 53.2146L48.7233 44.1406C49.143 43.9367 48.9576 43.3063 48.4941 43.358ZM39.5046 22.5547L28.1892 42.2328L49.8826 39.9483C50.4899 39.881 50.8211 39.2092 50.5003 38.6916L39.5046 22.5547ZM25.6246 21.8239H15.1633L25.6246 40.0166L36.0859 21.8239H25.6246Z"
                  fill="#A90047"
                />
              </svg>
            );
          }
          if (facility.icon === "lab") {
            image = (
              <svg
                viewBox="0 0 51 51"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M16.2754 31.543H17.4473V33.1055C17.4473 33.9688 18.1465 34.668 19.0098 34.668H22.916C23.7793 34.668 24.4785 33.9688 24.4785 33.1055V31.543H25.6504C27.376 31.543 28.7754 30.1436 28.7754 28.418V6.54297C28.7754 4.81738 27.376 3.41797 25.6504 3.41797V1.85547C25.6504 0.992188 24.9512 0.292969 24.0879 0.292969H17.8379C16.9746 0.292969 16.2754 0.992188 16.2754 1.85547V3.41797C14.5498 3.41797 13.1504 4.81738 13.1504 6.54297V28.418C13.1504 30.1436 14.5498 31.543 16.2754 31.543ZM45.9629 44.043H45.8369C48.8184 40.7217 50.6504 36.3477 50.6504 31.543C50.6504 21.2031 42.2402 12.793 31.9004 12.793V19.043C38.793 19.043 44.4004 24.6504 44.4004 31.543C44.4004 38.4355 38.793 44.043 31.9004 44.043H5.33789C2.74902 44.043 0.650391 46.1416 0.650391 48.7305C0.650391 49.5938 1.34961 50.293 2.21289 50.293H49.0879C49.9512 50.293 50.6504 49.5938 50.6504 48.7305C50.6504 46.1416 48.5518 44.043 45.9629 44.043ZM10.8066 40.918H31.1191C31.5508 40.918 31.9004 40.5684 31.9004 40.1367V38.5742C31.9004 38.1426 31.5508 37.793 31.1191 37.793H10.8066C10.375 37.793 10.0254 38.1426 10.0254 38.5742V40.1367C10.0254 40.5684 10.375 40.918 10.8066 40.918Z"
                  fill="#A90047"
                />
              </svg>
            );
          }
          if (facility.icon === "digitalLab") {
            image = (
              <svg
                viewBox="0 0 51 41"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M20.6 20.7344C21.0883 21.2227 21.8797 21.2227 22.368 20.7344L23.2516 19.8508C23.7398 19.3625 23.7398 18.5711 23.2516 18.0828L20.4609 15.293L23.2508 12.5023C23.7391 12.0141 23.7391 11.2227 23.2508 10.7344L22.3672 9.85078C21.8789 9.3625 21.0875 9.3625 20.5992 9.85078L16.0414 14.4086C15.5531 14.8969 15.5531 15.6883 16.0414 16.1766L20.6 20.7344ZM28.1008 19.8516L28.9844 20.7352C29.4727 21.2234 30.2641 21.2234 30.7523 20.7352L35.3102 16.1773C35.7984 15.6891 35.7984 14.8977 35.3102 14.4094L30.7523 9.85156C30.2641 9.36328 29.4727 9.36328 28.9844 9.85156L28.1008 10.7352C27.6125 11.2234 27.6125 12.0148 28.1008 12.5031L30.8906 15.293L28.1008 18.0836C27.6125 18.5719 27.6125 19.3633 28.1008 19.8516ZM49.4258 32.793H30.4836C30.4258 34.3406 29.3344 35.293 27.9258 35.293H23.1758C21.7156 35.293 20.5961 33.9281 20.6156 32.793H1.92578C1.23828 32.793 0.675781 33.3555 0.675781 34.043V35.293C0.675781 38.043 2.92578 40.293 5.67578 40.293H45.6758C48.4258 40.293 50.6758 38.043 50.6758 35.293V34.043C50.6758 33.3555 50.1133 32.793 49.4258 32.793ZM45.6758 4.04297C45.6758 1.98047 43.9883 0.292969 41.9258 0.292969H9.42578C7.36328 0.292969 5.67578 1.98047 5.67578 4.04297V30.293H45.6758V4.04297ZM40.6758 25.293H10.6758V5.29297H40.6758V25.293Z"
                  fill="#A90047"
                />
              </svg>
            );
          }
          if (facility.icon === "library") {
            image = (
              <svg
                viewBox="0 0 51 51"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M35.0501 9.66794C35.0501 4.49022 30.8529 0.292969 25.6753 0.292969C20.4977 0.292969 16.3005 4.49022 16.3005 9.66794C16.3005 14.8457 20.4977 19.0429 25.6753 19.0429C30.8529 19.0429 35.0501 14.8457 35.0501 9.66794ZM23.4869 23.8378C17.693 20.291 8.30844 19.3164 3.58588 19.0478C1.999 18.958 0.675781 20.1669 0.675781 21.6933V43.4511C0.675781 44.8505 1.8076 46.0175 3.26264 46.0927C7.52623 46.3163 16.152 47.1356 22.1138 50.1385C23.0289 50.5995 24.1138 49.9715 24.1138 48.9794V24.957C24.1128 24.5009 23.8872 24.0829 23.4869 23.8378ZM47.7647 19.0478C43.0431 19.3154 33.6576 20.291 27.8647 23.8378C27.4643 24.0829 27.2387 24.5175 27.2387 24.9736V48.9764C27.2387 49.9715 28.3266 50.6005 29.2446 50.1385C35.2054 47.1386 43.8263 46.3192 48.0889 46.0956C49.544 46.0194 50.6758 44.8524 50.6758 43.453V21.6933C50.6748 20.1669 49.3516 18.958 47.7647 19.0478Z"
                  fill="#A90047"
                />
              </svg>
            );
          }
          if (facility.icon === "teachers") {
            image = (
              <svg
                viewBox="0 0 50 40"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M16.2501 27.5C16.0634 27.5 15.8766 27.5273 15.6985 27.5852C14.686 27.9141 13.6212 28.125 12.5001 28.125C11.379 28.125 10.3142 27.9141 9.30089 27.5852C9.12276 27.5273 8.93682 27.5 8.7501 27.5C3.90168 27.5 -0.025655 31.4438 0.000126209 36.2984C0.0110637 38.35 1.69778 40 3.75012 40H21.2501C23.3024 40 24.9891 38.35 25.0001 36.2984C25.0258 31.4438 21.0985 27.5 16.2501 27.5ZM12.5001 25C16.6423 25 20.0001 21.6422 20.0001 17.5C20.0001 13.3578 16.6423 10 12.5001 10C8.35792 10 5.00011 13.3578 5.00011 17.5C5.00011 21.6422 8.35792 25 12.5001 25ZM46.25 0H16.2501C14.1821 0 12.5001 1.73828 12.5001 3.87422V7.5C14.3298 7.5 16.0235 8.02969 17.5001 8.89062V5H45V27.5H40V22.5H30.0001V27.5H24.0438C25.536 28.8039 26.6313 30.5258 27.1446 32.5H46.25C48.318 32.5 50 30.7617 50 28.6258V3.87422C50 1.73828 48.318 0 46.25 0Z"
                  fill="#A90047"
                />
              </svg>
            );
          }
          if (facility.icon === "playground") {
            image = (
              <svg
                viewBox="0 0 50 50"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M37.1547 35.877L40.0585 34.4758C41.1777 36.7843 42.68 38.8306 44.5049 40.6149C47.933 36.3306 50 30.9073 50 25C50 19.1028 47.9431 13.6895 44.5352 9.41532C42.7405 11.1593 41.2482 13.1552 40.1391 15.4133L37.2454 13.9919C38.536 11.371 40.2702 9.05242 42.3674 7.03629C37.8705 2.69153 31.7604 0 25.005 0C18.2597 0 12.1496 2.68145 7.65275 7.02621C9.73987 9.03226 11.4741 11.3508 12.7647 13.9617L9.87094 15.3831C8.76185 13.1351 7.27969 11.1391 5.48498 9.39516C2.05687 13.6794 0 19.0927 0 25C0 30.9073 2.05687 36.3206 5.48498 40.5948C7.32002 38.8105 8.83243 36.7641 9.9516 34.4456L12.8554 35.8468C11.5547 38.5383 9.80036 40.9173 7.66284 42.9738C12.1496 47.3185 18.2597 50 25.005 50C31.7403 50 37.8403 47.3286 42.3372 42.994C40.2097 40.9375 38.4553 38.5685 37.1547 35.877ZM14.1359 32.6512L11.0607 31.6633C12.563 26.9859 12.3412 22.2077 11.0002 18.1552L14.0653 17.1472C15.5777 21.744 15.8802 27.2177 14.1359 32.6512ZM35.9447 17.1875L39.0099 18.1956C37.679 22.2379 37.4471 27.0161 38.9494 31.7036L35.8742 32.6915C34.1299 27.248 34.4323 21.7742 35.9447 17.1875Z"
                  fill="#A90047"
                />
              </svg>
            );
          }
          if (facility.icon === "attendance") {
            image = (
              <svg
                viewBox="0 0 50 57"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M44.6429 0H5.35714C2.5 0 0 2.49375 0 5.34375V51.6562C0 54.5062 2.5 57 5.35714 57H44.6429C47.5 57 50 54.5062 50 51.6562V5.34375C50 2.49375 47.5 0 44.6429 0ZM14.2857 48.45C14.2857 49.1625 13.5714 49.875 12.8571 49.875H8.57143C7.85714 49.875 7.14286 49.1625 7.14286 48.45V44.175C7.14286 43.4625 7.85714 42.75 8.57143 42.75H12.8571C13.5714 42.75 14.2857 43.4625 14.2857 44.175V48.45ZM14.2857 34.2C14.2857 34.9125 13.5714 35.625 12.8571 35.625H8.57143C7.85714 35.625 7.14286 34.9125 7.14286 34.2V29.925C7.14286 29.2125 7.85714 28.5 8.57143 28.5H12.8571C13.5714 28.5 14.2857 29.2125 14.2857 29.925V34.2ZM28.5714 48.45C28.5714 49.1625 27.8571 49.875 27.1429 49.875H22.8571C22.1429 49.875 21.4286 49.1625 21.4286 48.45V44.175C21.4286 43.4625 22.1429 42.75 22.8571 42.75H27.1429C27.8571 42.75 28.5714 43.4625 28.5714 44.175V48.45ZM28.5714 34.2C28.5714 34.9125 27.8571 35.625 27.1429 35.625H22.8571C22.1429 35.625 21.4286 34.9125 21.4286 34.2V29.925C21.4286 29.2125 22.1429 28.5 22.8571 28.5H27.1429C27.8571 28.5 28.5714 29.2125 28.5714 29.925V34.2ZM42.8571 48.45C42.8571 49.1625 42.1429 49.875 41.4286 49.875H37.1429C36.4286 49.875 35.7143 49.1625 35.7143 48.45V29.925C35.7143 29.2125 36.4286 28.5 37.1429 28.5H41.4286C42.1429 28.5 42.8571 29.2125 42.8571 29.925V48.45ZM42.8571 19.95C42.8571 20.6625 42.1429 21.375 41.4286 21.375H8.57143C7.85714 21.375 7.14286 20.6625 7.14286 19.95V8.55C7.14286 7.8375 7.85714 7.125 8.57143 7.125H41.4286C42.1429 7.125 42.8571 7.8375 42.8571 8.55V19.95Z"
                  fill="#A90047"
                />
              </svg>
            );
          }
          if (facility.icon === "cctv") {
            image = (
              <svg
                viewBox="0 0 50 44"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M50 11V39.2857C50 41.8884 47.9004 44 45.3125 44H4.6875C2.09961 44 0 41.8884 0 39.2857V11C0 8.39732 2.09961 6.28571 4.6875 6.28571H13.2812L14.4824 3.05446C15.166 1.21786 16.9141 0 18.8672 0H31.123C33.0762 0 34.8242 1.21786 35.5078 3.05446L36.7188 6.28571H45.3125C47.9004 6.28571 50 8.39732 50 11ZM36.7188 25.1429C36.7188 18.6411 31.4648 13.3571 25 13.3571C18.5352 13.3571 13.2812 18.6411 13.2812 25.1429C13.2812 31.6446 18.5352 36.9286 25 36.9286C31.4648 36.9286 36.7188 31.6446 36.7188 25.1429ZM33.5938 25.1429C33.5938 29.9062 29.7363 33.7857 25 33.7857C20.2637 33.7857 16.4062 29.9062 16.4062 25.1429C16.4062 20.3795 20.2637 16.5 25 16.5C29.7363 16.5 33.5938 20.3795 33.5938 25.1429Z"
                  fill="#A90047"
                />
              </svg>
            );
          }
          if (facility.icon === "onlinePayment") {
            image = (
              <svg
                viewBox="0 0 50 30"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M27.5 17.5H26.25V10.625C26.25 10.2797 25.9703 10 25.625 10H24.5641C24.1938 10 23.832 10.1094 23.5242 10.3148L22.3266 11.1133C22.2583 11.1588 22.1996 11.2173 22.1539 11.2854C22.1082 11.3536 22.0764 11.4301 22.0603 11.5105C22.0442 11.591 22.0441 11.6739 22.06 11.7544C22.076 11.8349 22.1076 11.9114 22.1531 11.9797L22.8469 13.0195C22.8924 13.0878 22.9508 13.1465 23.019 13.1922C23.0872 13.2379 23.1637 13.2697 23.2441 13.2858C23.3246 13.3019 23.4074 13.302 23.4879 13.2861C23.5684 13.2701 23.645 13.2385 23.7133 13.193L23.75 13.1687V17.5H22.5C22.1547 17.5 21.875 17.7797 21.875 18.125V19.375C21.875 19.7203 22.1547 20 22.5 20H27.5C27.8453 20 28.125 19.7203 28.125 19.375V18.125C28.125 17.7797 27.8453 17.5 27.5 17.5ZM47.5 0H2.5C1.11953 0 0 1.11953 0 2.5V27.5C0 28.8805 1.11953 30 2.5 30H47.5C48.8805 30 50 28.8805 50 27.5V2.5C50 1.11953 48.8805 0 47.5 0ZM3.75 26.25V21.25C6.51172 21.25 8.75 23.4883 8.75 26.25H3.75ZM3.75 8.75V3.75H8.75C8.75 6.51172 6.51172 8.75 3.75 8.75ZM25 23.75C20.8578 23.75 17.5 19.832 17.5 15C17.5 10.1672 20.8578 6.25 25 6.25C29.1422 6.25 32.5 10.1672 32.5 15C32.5 19.8336 29.1406 23.75 25 23.75ZM46.25 26.25H41.25C41.25 23.4883 43.4883 21.25 46.25 21.25V26.25ZM46.25 8.75C43.4883 8.75 41.25 6.51172 41.25 3.75H46.25V8.75Z"
                  fill="#A90047"
                />
              </svg>
            );
          }
          if (facility.icon === "hybridTeaching") {
            image = (
              <svg
                viewBox="0 0 40 58"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M10.9159 51.4683C10.917 52.1809 11.1284 52.8787 11.525 53.4722L13.467 56.3824C13.7988 56.8799 14.2488 57.2879 14.7769 57.5701C15.3051 57.8523 15.8951 58 16.4943 58H23.5068C24.1061 58 24.696 57.8523 25.2242 57.5701C25.7524 57.2879 26.2023 56.8799 26.5341 56.3824L28.4761 53.4722C28.8726 52.8786 29.0844 52.1815 29.0852 51.4683L29.0898 47.1241H10.9102L10.9159 51.4683ZM0 19.9372C0 24.9634 1.86932 29.5489 4.95 33.0526C6.82727 35.1879 9.76364 39.6488 10.883 43.4119C10.8875 43.4414 10.8909 43.4709 10.8955 43.5003H29.1045C29.1091 43.4709 29.1125 43.4425 29.117 43.4119C30.2364 39.6488 33.1727 35.1879 35.05 33.0526C38.1307 29.5489 40 24.9634 40 19.9372C40 8.90495 31.0125 -0.0338871 19.9375 9.65791e-05C8.34545 0.035213 0 9.39884 0 19.9372ZM20 10.8749C14.9875 10.8749 10.9091 14.9404 10.9091 19.9372C10.9091 20.9386 10.0955 21.7496 9.09091 21.7496C8.08636 21.7496 7.27273 20.9386 7.27273 19.9372C7.27273 12.9411 12.9818 7.24994 20 7.24994C21.0045 7.24994 21.8182 8.06102 21.8182 9.0624C21.8182 10.0638 21.0045 10.8749 20 10.8749Z"
                  fill="#A90047"
                />
              </svg>
            );
          }
          if (facility.icon === "scholarship") {
            image = (
              <svg
                viewBox="0 0 51 51"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M50.3065 44.0931L40.3745 34.163C39.9262 33.7148 39.3186 33.4658 38.6811 33.4658H37.0575C39.8067 29.9496 41.4403 25.5279 41.4403 20.7168C41.4403 9.27264 32.1657 0 20.7206 0C9.27558 0 0 9.27264 0 20.7168C0 32.1609 9.27458 41.4335 20.7206 41.4335C25.5317 41.4335 29.9554 39.7999 33.4716 37.0507V38.6743C33.4716 39.3118 33.7206 39.9195 34.1688 40.3677L44.1008 50.2978C45.0372 51.2341 46.5512 51.2341 47.4776 50.2978L50.2965 47.4788C51.2328 46.5425 51.2328 45.0294 50.3065 44.0931ZM20.7206 35.0585C12.7977 35.0585 6.37696 28.6496 6.37696 20.7168C6.37696 12.7948 12.7868 6.375 20.7206 6.375C28.6435 6.375 35.0643 12.7839 35.0643 20.7168C35.0643 28.6387 28.6545 35.0585 20.7206 35.0585ZM23.421 19.8641L18.9376 18.5194C18.4237 18.365 18.0641 17.844 18.0641 17.2513C18.0641 16.5272 18.592 15.9375 19.2395 15.9375H22.0395C22.4937 15.9375 22.932 16.066 23.3164 16.308C23.6392 16.5103 24.0496 16.4983 24.3255 16.2353L25.4959 15.1187C25.8475 14.783 25.8276 14.2013 25.4391 13.9095C24.5327 13.2291 23.439 12.8367 22.3144 12.7789V11.1562C22.3144 10.716 21.9578 10.3594 21.5175 10.3594H19.9238C19.4835 10.3594 19.1269 10.716 19.1269 11.1562V12.762C16.7731 12.8247 14.8756 14.8089 14.8756 17.2513C14.8756 19.2405 16.1695 21.0176 18.0212 21.5734L22.5046 22.9181C23.0186 23.0725 23.3782 23.5935 23.3782 24.1862C23.3782 24.9103 22.8503 25.5 22.2028 25.5H19.4038C18.9496 25.5 18.5113 25.3715 18.1268 25.1295C17.8041 24.9272 17.3937 24.9392 17.1178 25.2022L15.9474 26.3188C15.5958 26.6545 15.6157 27.2362 16.0042 27.528C16.9106 28.2084 18.0043 28.6008 19.1289 28.6586V30.2812C19.1289 30.7215 19.4855 31.0781 19.9258 31.0781H21.5195C21.9598 31.0781 22.3164 30.7215 22.3164 30.2812V28.6755C24.6701 28.6128 26.5677 26.6296 26.5677 24.1862C26.5677 22.197 25.2738 20.4199 23.421 19.8641Z"
                  fill="#A90047"
                />
              </svg>
            );
          }
          if (facility.icon === "career") {
            image = (
              <svg
                viewBox="0 0 50 40"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M30 25H20C18.6195 25 17.5 26.1195 17.5 27.5V37.5C17.5 38.8805 18.6195 40 20 40H30C31.3805 40 32.5 38.8805 32.5 37.5V27.5C32.5 26.1195 31.3805 25 30 25ZM15 2.5C15 1.11953 13.8805 0 12.5 0H2.5C1.11953 0 0 1.11953 0 2.5V12.5C0 13.8805 1.11953 15 2.5 15H9.97812L15.6938 25.0031C16.5609 23.5141 18.1562 22.5 20 22.5H20.0219L15 13.7117V10H32.5V5H15V2.5ZM47.5 0H37.5C36.1195 0 35 1.11953 35 2.5V12.5C35 13.8805 36.1195 15 37.5 15H47.5C48.8805 15 50 13.8805 50 12.5V2.5C50 1.11953 48.8805 0 47.5 0Z"
                  fill="#A90047"
                />
              </svg>
            );
          }
          return (
            <Fragment key={facility?.id}>
              <Facility
                title={facility?.title}
                description={facility?.service_text}
                image={facility?.icon}
              />
            </Fragment>
          );
        })}
      </div>
    </>
  );
};

export default Facilities;
